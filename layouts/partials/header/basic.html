{{/* Logo section */}}
{{ define "HeaderLogo" }}
  {{ if .Site.Params.Logo }}
    {{ $logo := resources.Get .Site.Params.Logo }}
    {{ if $logo }}
      <div>
        <a href="{{ "" | relLangURL }}" class="flex">
          <span class="sr-only">{{ .Site.Title | markdownify }}</span>
          {{ if eq $logo.MediaType.SubType "svg" }}
            <span class="logo object-scale-down object-left nozoom">
              {{ $logo.Content | safeHTML }}
            </span>
          {{ else }}
            <img
              src="{{ $logo.RelPermalink }}"
              width="{{ div $logo.Width 2 }}"
              height="{{ div $logo.Height 2 }}"
              class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom"
              alt="">
          {{ end }}
        </a>
      </div>
    {{ end }}
  {{ else }}
    {{/* Text logo - when no image logo is configured */}}
    <div>
      <a href="{{ "" | relLangURL }}" class="flex items-center">
        <span class="text-2xl font-bold">{{ .Site.Title | markdownify }}</span>
      </a>
    </div>
  {{- end }}
{{ end }}

{{/* Desktop navigation */}}
{{ define "HeaderDesktopNavigation" }}
  <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">
    {{ if .Site.Menus.main }}
      {{ range .Site.Menus.main }}
        {{ partial "header/header-option.html" . }}
      {{ end }}
    {{ end }}

    {{ partial "translations.html" . }}
    {{ if .Site.Params.enableA11y | default false }}
      {{ template "HeaderA11y" (dict "prefix" "desktop-" "Site" .Site) }}
    {{ end }}

    {{ if .Site.Params.enableSearch | default false }}
      <button
        id="search-button"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="{{ i18n "search.open_button_title" }}">
        {{ partial "icon.html" "search" }}
      </button>
    {{ end }}

    {{ if .Site.Params.footer.showAppearanceSwitcher | default false }}
      <div class="{{ if .Site.Params.footer.showScrollToTop | default true -}}{{- end }} flex items-center">
        <button
          id="appearance-switcher"
          aria-label="Dark mode switcher"
          type="button"
          class="text-base hover:text-primary-600 dark:hover:text-primary-400">
          <div class="flex items-center justify-center dark:hidden">
            {{ partial "icon.html" "moon" }}
          </div>
          <div class="items-center justify-center hidden dark:flex">
            {{ partial "icon.html" "sun" }}
          </div>
        </button>
      </div>
    {{ end }}
  </nav>
{{ end }}

{{/* Mobile navigation */}}
{{ define "HeaderMobileToolbar" }}
  <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">
    <span></span>

    {{ partial "translations.html" . }}
    {{ if .Site.Params.enableA11y | default false }}
      {{ template "HeaderA11y" (dict "prefix" "mobile-" "Site" .Site) }}
    {{ end }}

    {{ if .Site.Params.enableSearch | default false }}
      <button
        id="search-button-mobile"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="{{ i18n "search.open_button_title" }}">
        {{ partial "icon.html" "search" }}
      </button>
    {{ end }}

    {{ if .Site.Params.footer.showAppearanceSwitcher | default false }}
      <button
        id="appearance-switcher-mobile"
        aria-label="Dark mode switcher"
        type="button"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400 me-1">
        <div class="flex items-center justify-center dark:hidden">
          {{ partial "icon.html" "moon" }}
        </div>
        <div class="items-center justify-center hidden dark:flex">
          {{ partial "icon.html" "sun" }}
        </div>
      </button>
    {{ end }}
  </div>
{{ end }}

{{/* Header element */}}
{{ define "Header" }}
  <header
    class="top-0 z-40 w-full transition-all duration-200 {{ if .Site.Params.Header.Sticky | default false }}sticky{{ else }}relative{{ end }}"
    id="the-header">
    <div class="flex items-center justify-between p-4 md:p-6 lg:p-8">
      {{ template "HeaderLogo" . }}
      <div class="flex items-center gap-x-6">
        {{ template "HeaderDesktopNavigation" . }}
        {{ template "HeaderMobileToolbar" . }}
      </div>
    </div>
  </header>
{{ end }}

{{/* Main element */}}
{{ define "Main" }}
  <main class="flex flex-col min-h-screen">
    {{ block "main" . }}{{ end }}
  </main>
{{ end }}

{{/* Article element */}}
{{ define "Article" }}
  <article class="grow w-full max-w-6xl mx-auto px-4 md:px-6 lg:px-8 py-12">
    {{ block "article" . }}{{ end }}
  </article>
{{ end }}
